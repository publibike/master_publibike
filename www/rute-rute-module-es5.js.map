<<<<<<< HEAD
{"version":3,"sources":["webpack:///src/app/rute/rute.module.ts","webpack:///src/app/rute/rute-routing.module.ts","webpack:///src/app/rute/rute.page.scss","webpack:///src/app/rute/rute.page.ts","webpack:///src/app/rute/rute.page.html"],"names":["RutePageModule","imports","declarations","routes","path","component","RutePageRoutingModule","forChild","exports","RutePage","apiService","storage","loadingCtrl","_zoom","_center","_basemap","_loaded","_view","_locator","_locate","_search","_track","_pointGC","_draw","_distance","horas","centesimas","minutos","segundos","_centesimas","_minutos","_segundos","_horas","isRun","recorrido","user","nombre","apellido","ganancia_total","km_total","cal_total","co2_total","ruteData","km","ingresos","cal","co2","Map","MapView","Graphic","RouteTask","RouteParameters","FeatureSet","Directions","Locate","Track","Locator","Search","Expand","Legend","Point","Draw","geometryEngine","FeatureLayer","DistanceMeasurement2DViewModel","map","basemap","container","mapEl","nativeElement","center","zoom","template","title","content","type","fieldInfos","fieldName","visible","label","parkingLayer","url","outFields","popupTemplate","add","customPoint","legend","view","layerInfos","layer","lgExpand","autoCollapse","ui","position","index","useHeadingEnabled","goToOverride","options","target","scale","goTo","graphic","symbol","size","color","outline","width","unit","routeTask","directions","routeServiceUrl","bgExpand","when","console","log","presentLoading","get","initializedMap","then","mapView","ready","loading","dismiss","clearWindows","start","fechaActual","Date","fecha","locate","latitude","coords","longitude","params","location","on","push","ult","length","calculateDistance","geocoder","locationToAddress","response","address","split","fstDirection","err","contador","setInterval","stop","time","clearInterval","fnlDirection","kms","parseFloat","toFixed","inicio","tiempo","sendRute","lon1","lon2","lat1","lat2","p","c","Math","cos","a","dis","asin","sqrt","create","cssClass","message","present","status","icon","selector"],"mappings":"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","file":"rute-rute-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RutePageRoutingModule } from './rute-routing.module';\r\n\r\nimport { RutePage } from './rute.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RutePageRoutingModule\r\n  ],\r\n  declarations: [RutePage]\r\n})\r\nexport class RutePageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RutePage } from './rute.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RutePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RutePageRoutingModule {}\r\n","export default \".logo-ekobike-in {\\n  position: unset;\\n  margin-bottom: 30px;\\n  margin-top: 20px;\\n}\\n\\n.content-map {\\n  height: 100%;\\n}\\n\\n#viewDiv {\\n  padding: 0;\\n  margin: 0;\\n  height: 400px;\\n  width: 100%;\\n}\\n\\n.esri-view-width-xsmall .esri-expand--auto .esri-expand__container--expanded {\\n  height: 34%;\\n  background: #001434;\\n}\\n\\n.esri-widget--button {\\n  background-color: #f9b410 !important;\\n  color: #001434 !important;\\n}\\n\\n.esri-view .esri-directions {\\n  position: fixed;\\n  right: 15px;\\n}\\n\\n.esri-view .esri-component.esri-attribution {\\n  position: fixed;\\n}\\n\\n.esri-search__suggestions-list > li {\\n  padding: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcnV0ZS9ydXRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxZQUFBO0FBRUo7O0FBQUE7RUFDSSxVQUFBO0VBQ0EsU0FBQTtFQUNBLGFBQUE7RUFDQSxXQUFBO0FBR0o7O0FBREE7RUFDSSxXQUFBO0VBQ0EsbUJBQUE7QUFJSjs7QUFGQTtFQUNJLG9DQUFBO0VBQ0EseUJBQUE7QUFLSjs7QUFIQTtFQUNJLGVBQUE7RUFDQSxXQUFBO0FBTUo7O0FBSEE7RUFDSSxlQUFBO0FBTUo7O0FBSkE7RUFDSSxZQUFBO0FBT0oiLCJmaWxlIjoic3JjL2FwcC9ydXRlL3J1dGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvZ28tZWtvYmlrZS1pbiB7XHJcbiAgICBwb3NpdGlvbjogdW5zZXQ7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxufVxyXG4uY29udGVudC1tYXB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuI3ZpZXdEaXYge1xyXG4gICAgcGFkZGluZzogMDtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIGhlaWdodDogNDAwcHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG4uZXNyaS12aWV3LXdpZHRoLXhzbWFsbCAuZXNyaS1leHBhbmQtLWF1dG8gLmVzcmktZXhwYW5kX19jb250YWluZXItLWV4cGFuZGVkIHtcclxuICAgIGhlaWdodDogMzQlO1xyXG4gICAgYmFja2dyb3VuZDogIzAwMTQzNDtcclxufVxyXG4uZXNyaS13aWRnZXQtLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjliNDEwICFpbXBvcnRhbnQ7XHJcbiAgICBjb2xvcjogIzAwMTQzNCAhaW1wb3J0YW50O1xyXG59XHJcbi5lc3JpLXZpZXcgLmVzcmktZGlyZWN0aW9ucyB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICByaWdodDogMTVweDtcclxufVxyXG5cclxuLmVzcmktdmlldyAuZXNyaS1jb21wb25lbnQuZXNyaS1hdHRyaWJ1dGlvbiB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbn1cclxuLmVzcmktc2VhcmNoX19zdWdnZXN0aW9ucy1saXN0ID4gbGkge1xyXG4gICAgcGFkZGluZzogMWVtO1xyXG59XHJcbiJdfQ== */\";","import { Component, ElementRef, OnInit, ViewChild } from \"@angular/core\";\r\nimport { LoadingController } from \"@ionic/angular\";\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { loadModules } from \"esri-loader\";\r\nimport { ApiPublibikeBienestarService } from \"../services/api-publibike-bienestar.service\";\r\nimport esri = __esri;\r\n\r\n@Component({\r\n  selector: \"app-rute\",\r\n  templateUrl: \"./rute.page.html\",\r\n  styleUrls: [\"./rute.page.scss\"],\r\n})\r\nexport class RutePage implements OnInit {\r\n  @ViewChild(\"map\") mapEl: ElementRef;\r\n  loading: any;\r\n  //Variables ArcGIS\r\n  private _zoom = 10;\r\n  private _center: Array<number> = [-74.090923, 4.694939];\r\n  private _basemap = \"streets-vector\";\r\n  private _loaded = false;\r\n  private _view: esri.MapView = null;\r\n  private _locator: esri.Locator = null;\r\n  private _locate: esri.Locate = null;\r\n  private _search: esri.widgetsSearch = null;\r\n  private _track: esri.Track = null;\r\n  private _pointGC: esri.Point = null;\r\n  private _draw: esri.Draw = null;\r\n  private _distance: esri.DistanceMeasurement2DViewModel = null;\r\n\r\n  //Variables del cronometro\r\n  public horas: number = 0;\r\n  public centesimas: number = 0;\r\n  public minutos: number = 59;\r\n  public segundos: number = 0;\r\n  public contador: any;\r\n\r\n  public _centesimas: string = \"00\";\r\n  public _minutos: string = \"00\";\r\n  public _segundos: string = \"00\";\r\n  public _horas: string = \"00\";\r\n\r\n  isRun = false;\r\n\r\n  //Array recorrido con las coordenadas\r\n  recorrido: any[] = [];\r\n\r\n  user: {\r\n    nombre: String;\r\n    apellido: String;\r\n    ganancia_total: number;\r\n    km_total: number;\r\n    cal_total: number;\r\n    co2_total: number;\r\n  } = {\r\n    nombre: \"\",\r\n    apellido: \"\",\r\n    ganancia_total: 0,\r\n    km_total: 0,\r\n    cal_total: 0,\r\n    co2_total: 0,\r\n  };\r\n  ruteData: object = {};\r\n  fecha: any;\r\n  fstDirection: any;\r\n  fnlDirection: any;\r\n  time: any;\r\n  km: any = 0.0;\r\n  ingresos: any = 0;\r\n  cal: any = 0;\r\n  co2: any = 0;\r\n\r\n  constructor(\r\n    private apiService: ApiPublibikeBienestarService,\r\n    private storage: Storage,\r\n    private loadingCtrl: LoadingController\r\n  ) {}\r\n\r\n  async initializedMap() {\r\n    try {\r\n      const [\r\n        Map,\r\n        MapView,\r\n        Graphic,\r\n        RouteTask,\r\n        RouteParameters,\r\n        FeatureSet,\r\n        Directions,\r\n        Locate,\r\n        Track,\r\n        Locator,\r\n        Search,\r\n        Expand,\r\n        Legend,\r\n        Point,\r\n        Draw,\r\n        geometryEngine,\r\n        FeatureLayer,\r\n        DistanceMeasurement2DViewModel,\r\n      ]: any = await loadModules([\r\n        \"esri/Map\",\r\n        \"esri/views/MapView\",\r\n        \"esri/Graphic\",\r\n        \"esri/tasks/RouteTask\",\r\n        \"esri/tasks/support/RouteParameters\",\r\n        \"esri/tasks/support/FeatureSet\",\r\n        \"esri/widgets/Directions\",\r\n        \"esri/widgets/Locate\",\r\n        \"esri/widgets/Track\",\r\n        \"esri/tasks/Locator\",\r\n        \"esri/widgets/Search\",\r\n        \"esri/widgets/Expand\",\r\n        \"esri/widgets/Legend\",\r\n        \"esri/geometry/Point\",\r\n        \"esri/views/draw/Draw\",\r\n        \"esri/geometry/geometryEngine\",\r\n        \"esri/layers/FeatureLayer\",\r\n        \"esri/widgets/DistanceMeasurement2D/DistanceMeasurement2DViewModel\",\r\n      ]);\r\n      // await this._platform.ready();\r\n\r\n      let map = new Map({\r\n        basemap: this._basemap,\r\n      });\r\n      // Inflate and display the map\r\n      this._view = new MapView({\r\n        // create the map view at the DOM element in this component\r\n        container: this.mapEl.nativeElement,\r\n        center: this._center,\r\n        zoom: this._zoom,\r\n        map: map,\r\n      });\r\n\r\n      const template = {\r\n        title: \"Cicloparqueadero\",\r\n        content: [\r\n          {\r\n            //Formato tipo fila\r\n\r\n            type: \"fields\", //FieldsContentElement\r\n            //Sirve para proporcionar información en vistas y capas\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"COD_CICP\",\r\n                visible: false,\r\n                label: \"Codigo_Cicloparqueadero\",\r\n              },\r\n              {\r\n                fieldName: \"NOMBRE_CICP\",\r\n                visible: true,\r\n                label: \"Nombre\",\r\n              },\r\n              {\r\n                fieldName: \"HORARIO_CICP\",\r\n                visible: true,\r\n                label: \"Horario\",\r\n              },\r\n              {\r\n                fieldName: \"DIRECCION\",\r\n                visible: true,\r\n                label: \"Dirección\",\r\n              },\r\n              {\r\n                fieldName: \"LOCALIDAD\",\r\n                visible: true,\r\n                label: \"Localidad\",\r\n              },\r\n              {\r\n                fieldName: \"CUPOS\",\r\n                visible: true,\r\n                label: \"Cupos\",\r\n              },\r\n              {\r\n                fieldName: \"TIPOLOGIA_CICP\",\r\n                visible: true,\r\n                label: \"Servicio\",\r\n              },\r\n              {\r\n                fieldName: \"SELLO\",\r\n                visible: false,\r\n                label: \"SELLO_TIPO\",\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      };\r\n      const parkingLayer = new FeatureLayer({\r\n        url:\r\n          \"https://services2.arcgis.com/NEwhEo9GGSHXcRXV/arcgis/rest/services/Cicloparqueaderos_Certificados_Bogota_D_C/FeatureServer/0\",\r\n        outFields: [\"*\"],\r\n        popupTemplate: template,\r\n      });\r\n      map.add(parkingLayer);\r\n      const customPoint = new FeatureLayer({\r\n        url:\r\n          \"https://serviciosgis.catastrobogota.gov.co/arcgis/rest/services/movilidad/cicloparqueadero/MapServer\",\r\n      });\r\n      map.add(customPoint);\r\n      var legend = new Legend({\r\n        view: this._view,\r\n        layerInfos: [\r\n          {\r\n            layer: parkingLayer,\r\n            title: \"Categoria Cicloparqueaderos\",\r\n          },\r\n        ],\r\n      });\r\n      // this._view.ui.add(legend, \"bottom-right\");\r\n\r\n      let lgExpand = new Expand({\r\n        view: this._view,\r\n        content: legend,\r\n        autoCollapse: false,\r\n      });\r\n      this._view.ui.add(lgExpand, \"bottom-right\");\r\n      //Se configura y crea el widget de busqueda\r\n      this._search = new Search({\r\n        view: this._view,\r\n      });\r\n\r\n      this._view.ui.add(this._search, {\r\n        position: \"top-left\",\r\n        index: 0,\r\n      });\r\n\r\n      this._locator = new Locator({\r\n        url:\r\n          \"https://utility.arcgis.com/usrsvcs/appservices/rdJwJijx0YBycNdS/rest/services/World/GeocodeServer/reverseGeocode\",\r\n      });\r\n      this._locate = new Locate({\r\n        view: this._view,\r\n        useHeadingEnabled: false,\r\n        goToOverride: function (view, options) {\r\n          options.target.scale = 1500; // Override the default map scale\r\n          return view.goTo(options.target);\r\n        },\r\n      });\r\n\r\n      this._view.ui.add(this._locate, {\r\n        position: \"top-left\",\r\n        index: 2,\r\n      });\r\n\r\n      this._pointGC = new Point();\r\n      this._draw = new Draw({\r\n        view: this._view,\r\n      });\r\n      this._track = new Track({\r\n        view: this._view,\r\n        graphic: new Graphic({\r\n          symbol: {\r\n            type: \"simple-marker\",\r\n            size: \"12px\",\r\n            color: \"green\",\r\n            outline: {\r\n              color: \"#efefef\",\r\n              width: \"1.5px\",\r\n            },\r\n          },\r\n        }),\r\n        useHeadingEnabled: true, // Don't change orientation of the map\r\n        goToOverride: function (view, options) {\r\n          options.target.scale = 1500; // Override the default map scale\r\n          return view.goTo(options.target);\r\n        },\r\n      });\r\n\r\n      // this._view.ui.add(this._track, \"top-left\");\r\n\r\n      this._distance = new DistanceMeasurement2DViewModel({\r\n        view: this._view,\r\n        unit: \"kilometers\",\r\n      });\r\n\r\n      let routeTask = new RouteTask({\r\n        // url: \"https://utility.arcgis.com/usrsvcs/appservices/6MyWChEzkSbXMie3/rest/services/World/Route/NAServer/Route_World/solve\"\r\n        url:\r\n          \"https://sig.simur.gov.co/arcgis/rest/services/MVI_REDBICI/NARedBici/NAServer/Principiante\",\r\n      });\r\n\r\n      let directions = new Directions({\r\n        view: this._view,\r\n        // routeServiceUrl: \"https://utility.arcgis.com/usrsvcs/appservices/6MyWChEzkSbXMie3/rest/services/World/Route/NAServer/Route_World\"\r\n        routeServiceUrl:\r\n          \"https://sig.simur.gov.co/arcgis/rest/services/MVI_REDBICI/NARedBici/NAServer/Principiante\",\r\n      });\r\n\r\n      let bgExpand = new Expand({\r\n        view: this._view,\r\n        content: directions,\r\n        autoCollapse: false,\r\n      });\r\n      this._view.ui.add(bgExpand, \"top-right\");\r\n\r\n      await this._view.when();\r\n\r\n      return this._view;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  async ngOnInit() {\r\n    this.presentLoading();\r\n    // this.backgroundMode.enable();\r\n    this.user = await this.storage.get(\"userData\");\r\n    this.initializedMap().then(async (mapView) => {\r\n      console.log(\"mapView ready: \", this._view.ready);\r\n      this._loaded = this._view.ready;\r\n\r\n      // let position = await this._locate.locate();\r\n      // console.log(\"position\", position)\r\n      // mapView.goTo({\r\n      //   center: this._locate.locate(),\r\n      //   zoom: 6,\r\n      //   tilt: 40\r\n      // })\r\n      this.loading.dismiss();\r\n    });\r\n  }\r\n  async startRute() {\r\n    this.clearWindows();\r\n    this._track.start();\r\n    await this._distance.start();\r\n    console.log(this._distance);\r\n    const fechaActual = new Date();\r\n    this.fecha = fechaActual;\r\n    console.log(this.fecha);\r\n    //se toma la posicion y se geocodifica\r\n    let address;\r\n    let position = await this._locate.locate();\r\n    this._pointGC.latitude = position.coords.latitude;\r\n    this._pointGC.longitude = position.coords.longitude;\r\n    let params = {\r\n      location: this._pointGC,\r\n    };\r\n    this._track.on(\"track\", async (position) => {\r\n      this.recorrido.push(position);\r\n      let ult = this.recorrido.length - 1;\r\n      if (this.recorrido.length > 1) {\r\n        this.km = this.calculateDistance(\r\n          this.recorrido[0].position.coords.longitude,\r\n          this.recorrido[ult].position.coords.longitude,\r\n          this.recorrido[0].position.coords.latitude,\r\n          this.recorrido[ult].position.coords.latitude\r\n        );\r\n        console.log(this.km);\r\n        // this.ingresos = this.km * this.user.campana_actual.pago_km;\r\n      }\r\n    });\r\n    let geocoder = this._locator;\r\n    geocoder\r\n      .locationToAddress(params)\r\n      .then((response) => {\r\n        address = response.address;\r\n        console.log(address);\r\n        address = address.split(\",\");\r\n        this.fstDirection = address[0];\r\n        // this.currentDirection = address[0];\r\n        // this.km = position.coords.speed;\r\n\r\n        // console.log(this.currentDirection)\r\n      })\r\n      .catch((err) => console.log(err));\r\n    //Se inicializa el contador\r\n    this.contador = setInterval(() => {\r\n      this.centesimas += 1;\r\n      if (this.centesimas < 10) this._centesimas = \"0\" + this.centesimas;\r\n      else this._centesimas = \"\" + this.centesimas;\r\n      if (this.centesimas == 10) {\r\n        this.centesimas = 0;\r\n        this.segundos += 1;\r\n        if (this.segundos < 10) this._segundos = \"0\" + this.segundos;\r\n        else this._segundos = this.segundos + \"\";\r\n        if (this.segundos == 60) {\r\n          this.segundos = 0;\r\n          this.minutos += 1;\r\n          if (this.minutos < 10) this._minutos = \"0\" + this.minutos;\r\n          else this._minutos = this.minutos + \"\";\r\n          this._segundos = \"00\";\r\n          if (this.minutos == 60) {\r\n            this.minutos = 0;\r\n            this.minutos += 1;\r\n            if (this.horas < 10) this._horas = \"0\" + this.horas;\r\n            else this._horas = this.horas + \"\";\r\n            this._minutos = \"00\";\r\n          }\r\n        }\r\n      }\r\n    }, 100);\r\n  }\r\n  async stopRute() {\r\n    try {\r\n      // this.presentLoading();\r\n      if (!this.isRun) {\r\n        this._track.stop();\r\n        this.time = `${this._horas}:${this._minutos}:${this._segundos}.${this._centesimas}`;\r\n        clearInterval(this.contador);\r\n        // this.minutos = 0;\r\n        // this.segundos = 0;\r\n        // this.centesimas = 0;\r\n        // this.horas = 0;\r\n\r\n        // this._centesimas = '00';\r\n        // this._segundos = '00';\r\n        // this._minutos = '00';\r\n        // this._horas = '00';\r\n        this.isRun = false;\r\n        // this.contador = null;\r\n\r\n        //se toma la posicion y se geocodifica\r\n        let address;\r\n        let position = await this._locate.locate();\r\n        this._pointGC.latitude = position.coords.latitude;\r\n        this._pointGC.longitude = position.coords.longitude;\r\n        let params = {\r\n          location: this._pointGC,\r\n        };\r\n        let geocoder = this._locator;\r\n        geocoder\r\n          .locationToAddress(params)\r\n          .then((response) => {\r\n            address = response.address;\r\n            console.log(address);\r\n            address = address.split(\",\");\r\n            this.fnlDirection = address[0];\r\n            // this.currentDirection = address[0];\r\n            // console.log(this.currentDirection)\r\n            let kms = parseFloat(this.km);\r\n            let co2 = kms * 0.3;\r\n            this.co2 = co2.toFixed(3);\r\n            console.log(\"co2\", typeof kms, this.co2);\r\n            this.ruteData = {\r\n              fecha: this.fecha,\r\n              inicio: this.fstDirection,\r\n              final: this.fnlDirection,\r\n              tiempo: this.time,\r\n              kms: this.km,\r\n              cal: this.cal,\r\n              co2: this.co2,\r\n              ingresos: this.ingresos,\r\n            };\r\n            console.log(this.ruteData);\r\n            this.apiService.sendRute(this.ruteData);\r\n            // .then(()=>{this.loading.dismiss()});\r\n          })\r\n          .catch((err) => console.log(err));\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  calculateDistance(lon1, lon2, lat1, lat2) {\r\n    let p = 0.017453292519943295;\r\n    let c = Math.cos;\r\n    let a =\r\n      0.5 -\r\n      c((lat1 - lat2) * p) / 2 +\r\n      (c(lat2 * p) * c(lat1 * p) * (1 - c((lon1 - lon2) * p))) / 2;\r\n    let dis = 12742 * Math.asin(Math.sqrt(a));\r\n    return dis.toFixed(2);\r\n  }\r\n  clearWindows() {\r\n    this.minutos = 0;\r\n    this.segundos = 0;\r\n    this.centesimas = 0;\r\n    this.horas = 0;\r\n\r\n    this._centesimas = \"00\";\r\n    this._segundos = \"00\";\r\n    this._minutos = \"00\";\r\n    this._horas = \"00\";\r\n    this.km = 0;\r\n  }\r\n  async presentLoading() {\r\n    this.loading = await this.loadingCtrl.create({\r\n      cssClass: \"my-custom-class\",\r\n      message: \"Cargando...\",\r\n    });\r\n    await this.loading.present();\r\n  }\r\n  getIconByStatus(status) {\r\n    let icon = \"\";\r\n    switch (status) {\r\n      case \"true\":\r\n        icon = \"button-stop-29.png\";\r\n        break;\r\n      case \"false\":\r\n        icon = \"button-start-29.png\";\r\n        break;\r\n    }\r\n    return icon;\r\n  }\r\n}\r\n","export default \"<ion-content>\\r\\n  <div class=\\\"logo-ekobike-in\\\">    \\r\\n      <img src=\\\"assets/img/logo-ekobike.png\\\">\\r\\n  </div>\\r\\n    <!-- <div id=\\\"viewDiv\\\" #map></div> -->\\r\\n  <div class=\\\"content-map\\\">\\r\\n    <div class=\\\"ui grid content-play\\\">\\r\\n      <div class=\\\"column distance\\\">\\r\\n        <!-- <h5>Explora</h5>\\r\\n        <h3 id=\\\"km\\\">0</h3> -->\\r\\n        <h4>Explora</h4>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div id=\\\"viewDiv\\\" #map></div>\\r\\n    <!-- <div class=\\\"chrono\\\">\\r\\n      <div class=\\\"time-elapsed\\\">\\r\\n        <h4>\\r\\n          Tiempo Recorrido\\r\\n        </h4>\\r\\n        <h2 id=time>{{_horas}}:{{_minutos}}:{{_segundos}}.{{_centesimas}}</h2>\\r\\n      </div>\\r\\n      <div class=\\\"calories-co2\\\">\\r\\n        <div class=\\\"calories\\\">\\r\\n          <h4>\\r\\n            Consumo de Calorías\\r\\n          </h4>\\r\\n          <h2>\\r\\n            0\\r\\n          </h2>\\r\\n          <h5>\\r\\n            Kcal\\r\\n          </h5>\\r\\n        </div>\\r\\n        <div class=\\\"co2\\\">\\r\\n          <h4>\\r\\n            CO2 Reducido\\r\\n          </h4>\\r\\n          <h2>\\r\\n            0\\r\\n          </h2>\\r\\n          <h5>\\r\\n            Kgr\\r\\n          </h5>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"max-speed\\\">\\r\\n        <h4>\\r\\n          Velocidad Máxima\\r\\n        </h4>\\r\\n        <h2>\\r\\n          0\\r\\n        </h2>\\r\\n        <h5>\\r\\n          Km/h\\r\\n        </h5>\\r\\n      </div>\\r\\n    </div> -->\\r\\n  </div>\\r\\n</ion-content>\";"]}
=======
{"version":3,"sources":["webpack:///src/app/rute/rute.module.ts","webpack:///src/app/rute/rute-routing.module.ts","webpack:///src/app/rute/rute.page.scss","webpack:///src/app/rute/rute.page.ts","webpack:///src/app/rute/rute.page.html"],"names":["RutePageModule","imports","declarations","routes","path","component","RutePageRoutingModule","forChild","exports","RutePage","apiService","storage","loadingCtrl","_zoom","_center","_basemap","_loaded","_view","_locator","_locate","_search","_track","_pointGC","_draw","_distance","horas","centesimas","minutos","segundos","_centesimas","_minutos","_segundos","_horas","isRun","recorrido","user","nombre","apellido","ganancia_total","km_total","cal_total","co2_total","ruteData","km","ingresos","cal","co2","Map","MapView","Graphic","RouteTask","RouteParameters","FeatureSet","Directions","Locate","Track","Locator","Search","Expand","Legend","Point","Draw","geometryEngine","FeatureLayer","DistanceMeasurement2DViewModel","map","basemap","container","mapEl","nativeElement","center","zoom","template","title","content","type","fieldInfos","fieldName","visible","label","parkingLayer","url","outFields","popupTemplate","add","customPoint","legend","view","layerInfos","layer","lgExpand","autoCollapse","ui","position","index","useHeadingEnabled","goToOverride","options","target","scale","goTo","graphic","symbol","size","color","outline","width","unit","routeTask","directions","routeServiceUrl","bgExpand","when","console","log","presentLoading","get","initializedMap","then","mapView","ready","loading","dismiss","clearWindows","start","fechaActual","Date","fecha","locate","latitude","coords","longitude","params","location","on","push","ult","length","calculateDistance","geocoder","locationToAddress","response","address","split","fstDirection","err","contador","setInterval","stop","time","clearInterval","fnlDirection","kms","parseFloat","toFixed","inicio","tiempo","sendRute","lon1","lon2","lat1","lat2","p","c","Math","cos","a","dis","asin","sqrt","create","cssClass","message","present","status","icon","selector"],"mappings":"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","file":"rute-rute-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RutePageRoutingModule } from './rute-routing.module';\n\nimport { RutePage } from './rute.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RutePageRoutingModule\n  ],\n  declarations: [RutePage]\n})\nexport class RutePageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RutePage } from './rute.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RutePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RutePageRoutingModule {}\n","export default \".logo-ekobike-in {\\n  position: unset;\\n  margin-bottom: 30px;\\n  margin-top: 20px;\\n}\\n\\n.content-map {\\n  height: 100%;\\n}\\n\\n#viewDiv {\\n  padding: 0;\\n  margin: 0;\\n  height: 400px;\\n  width: 100%;\\n}\\n\\n.esri-view-width-xsmall .esri-expand--auto .esri-expand__container--expanded {\\n  height: 34%;\\n  background: #001434;\\n}\\n\\n.esri-widget--button {\\n  background-color: #f9b410 !important;\\n  color: #001434 !important;\\n}\\n\\n.esri-view .esri-directions {\\n  position: fixed;\\n  right: 15px;\\n}\\n\\n.esri-view .esri-component.esri-attribution {\\n  position: fixed;\\n}\\n\\n.esri-search__suggestions-list > li {\\n  padding: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcnV0ZS9ydXRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxZQUFBO0FBRUo7O0FBQUE7RUFDSSxVQUFBO0VBQ0EsU0FBQTtFQUNBLGFBQUE7RUFDQSxXQUFBO0FBR0o7O0FBREE7RUFDSSxXQUFBO0VBQ0EsbUJBQUE7QUFJSjs7QUFGQTtFQUNJLG9DQUFBO0VBQ0EseUJBQUE7QUFLSjs7QUFIQTtFQUNJLGVBQUE7RUFDQSxXQUFBO0FBTUo7O0FBSEE7RUFDSSxlQUFBO0FBTUo7O0FBSkE7RUFDSSxZQUFBO0FBT0oiLCJmaWxlIjoic3JjL2FwcC9ydXRlL3J1dGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvZ28tZWtvYmlrZS1pbiB7XG4gICAgcG9zaXRpb246IHVuc2V0O1xuICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgbWFyZ2luLXRvcDogMjBweDtcbn1cbi5jb250ZW50LW1hcHtcbiAgICBoZWlnaHQ6IDEwMCU7XG59XG4jdmlld0RpdiB7XG4gICAgcGFkZGluZzogMDtcbiAgICBtYXJnaW46IDA7XG4gICAgaGVpZ2h0OiA0MDBweDtcbiAgICB3aWR0aDogMTAwJTtcbn1cbi5lc3JpLXZpZXctd2lkdGgteHNtYWxsIC5lc3JpLWV4cGFuZC0tYXV0byAuZXNyaS1leHBhbmRfX2NvbnRhaW5lci0tZXhwYW5kZWQge1xuICAgIGhlaWdodDogMzQlO1xuICAgIGJhY2tncm91bmQ6ICMwMDE0MzQ7XG59XG4uZXNyaS13aWRnZXQtLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y5YjQxMCAhaW1wb3J0YW50O1xuICAgIGNvbG9yOiAjMDAxNDM0ICFpbXBvcnRhbnQ7XG59XG4uZXNyaS12aWV3IC5lc3JpLWRpcmVjdGlvbnMge1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICByaWdodDogMTVweDtcbn1cblxuLmVzcmktdmlldyAuZXNyaS1jb21wb25lbnQuZXNyaS1hdHRyaWJ1dGlvbiB7XG4gICAgcG9zaXRpb246IGZpeGVkO1xufVxuLmVzcmktc2VhcmNoX19zdWdnZXN0aW9ucy1saXN0ID4gbGkge1xuICAgIHBhZGRpbmc6IDFlbTtcbn1cbiJdfQ== */\";","import { Component, ElementRef, OnInit, ViewChild } from \"@angular/core\";\nimport { LoadingController } from \"@ionic/angular\";\nimport { Storage } from \"@ionic/storage\";\nimport { loadModules } from \"esri-loader\";\nimport { ApiPublibikeBienestarService } from \"../services/api-publibike-bienestar.service\";\nimport esri = __esri;\n\n@Component({\n  selector: \"app-rute\",\n  templateUrl: \"./rute.page.html\",\n  styleUrls: [\"./rute.page.scss\"],\n})\nexport class RutePage implements OnInit {\n  @ViewChild(\"map\") mapEl: ElementRef;\n  loading: any;\n  //Variables ArcGIS\n  private _zoom = 10;\n  private _center: Array<number> = [-74.090923, 4.694939];\n  private _basemap = \"streets-vector\";\n  private _loaded = false;\n  private _view: esri.MapView = null;\n  private _locator: esri.Locator = null;\n  private _locate: esri.Locate = null;\n  private _search: esri.widgetsSearch = null;\n  private _track: esri.Track = null;\n  private _pointGC: esri.Point = null;\n  private _draw: esri.Draw = null;\n  private _distance: esri.DistanceMeasurement2DViewModel = null;\n\n  //Variables del cronometro\n  public horas: number = 0;\n  public centesimas: number = 0;\n  public minutos: number = 59;\n  public segundos: number = 0;\n  public contador: any;\n\n  public _centesimas: string = \"00\";\n  public _minutos: string = \"00\";\n  public _segundos: string = \"00\";\n  public _horas: string = \"00\";\n\n  isRun = false;\n\n  //Array recorrido con las coordenadas\n  recorrido: any[] = [];\n\n  user: {\n    nombre: String;\n    apellido: String;\n    ganancia_total: number;\n    km_total: number;\n    cal_total: number;\n    co2_total: number;\n  } = {\n    nombre: \"\",\n    apellido: \"\",\n    ganancia_total: 0,\n    km_total: 0,\n    cal_total: 0,\n    co2_total: 0,\n  };\n  ruteData: object = {};\n  fecha: any;\n  fstDirection: any;\n  fnlDirection: any;\n  time: any;\n  km: any = 0.0;\n  ingresos: any = 0;\n  cal: any = 0;\n  co2: any = 0;\n\n  constructor(\n    private apiService: ApiPublibikeBienestarService,\n    private storage: Storage,\n    private loadingCtrl: LoadingController\n  ) {}\n\n  async initializedMap() {\n    try {\n      const [\n        Map,\n        MapView,\n        Graphic,\n        RouteTask,\n        RouteParameters,\n        FeatureSet,\n        Directions,\n        Locate,\n        Track,\n        Locator,\n        Search,\n        Expand,\n        Legend,\n        Point,\n        Draw,\n        geometryEngine,\n        FeatureLayer,\n        DistanceMeasurement2DViewModel,\n      ]: any = await loadModules([\n        \"esri/Map\",\n        \"esri/views/MapView\",\n        \"esri/Graphic\",\n        \"esri/tasks/RouteTask\",\n        \"esri/tasks/support/RouteParameters\",\n        \"esri/tasks/support/FeatureSet\",\n        \"esri/widgets/Directions\",\n        \"esri/widgets/Locate\",\n        \"esri/widgets/Track\",\n        \"esri/tasks/Locator\",\n        \"esri/widgets/Search\",\n        \"esri/widgets/Expand\",\n        \"esri/widgets/Legend\",\n        \"esri/geometry/Point\",\n        \"esri/views/draw/Draw\",\n        \"esri/geometry/geometryEngine\",\n        \"esri/layers/FeatureLayer\",\n        \"esri/widgets/DistanceMeasurement2D/DistanceMeasurement2DViewModel\",\n      ]);\n      // await this._platform.ready();\n\n      let map = new Map({\n        basemap: this._basemap,\n      });\n      // Inflate and display the map\n      this._view = new MapView({\n        // create the map view at the DOM element in this component\n        container: this.mapEl.nativeElement,\n        center: this._center,\n        zoom: this._zoom,\n        map: map,\n      });\n\n      const template = {\n        title: \"Cicloparqueadero\",\n        content: [\n          {\n            //Formato tipo fila\n\n            type: \"fields\", //FieldsContentElement\n            //Sirve para proporcionar información en vistas y capas\n            fieldInfos: [\n              {\n                fieldName: \"COD_CICP\",\n                visible: false,\n                label: \"Codigo_Cicloparqueadero\",\n              },\n              {\n                fieldName: \"NOMBRE_CICP\",\n                visible: true,\n                label: \"Nombre\",\n              },\n              {\n                fieldName: \"HORARIO_CICP\",\n                visible: true,\n                label: \"Horario\",\n              },\n              {\n                fieldName: \"DIRECCION\",\n                visible: true,\n                label: \"Dirección\",\n              },\n              {\n                fieldName: \"LOCALIDAD\",\n                visible: true,\n                label: \"Localidad\",\n              },\n              {\n                fieldName: \"CUPOS\",\n                visible: true,\n                label: \"Cupos\",\n              },\n              {\n                fieldName: \"TIPOLOGIA_CICP\",\n                visible: true,\n                label: \"Servicio\",\n              },\n              {\n                fieldName: \"SELLO\",\n                visible: false,\n                label: \"SELLO_TIPO\",\n              },\n            ],\n          },\n        ],\n      };\n      const parkingLayer = new FeatureLayer({\n        url:\n          \"https://services2.arcgis.com/NEwhEo9GGSHXcRXV/arcgis/rest/services/Cicloparqueaderos_Certificados_Bogota_D_C/FeatureServer/0\",\n        outFields: [\"*\"],\n        popupTemplate: template,\n      });\n      map.add(parkingLayer);\n      const customPoint = new FeatureLayer({\n        url:\n          \"https://serviciosgis.catastrobogota.gov.co/arcgis/rest/services/movilidad/cicloparqueadero/MapServer\",\n      });\n      map.add(customPoint);\n      var legend = new Legend({\n        view: this._view,\n        layerInfos: [\n          {\n            layer: parkingLayer,\n            title: \"Categoria Cicloparqueaderos\",\n          },\n        ],\n      });\n      // this._view.ui.add(legend, \"bottom-right\");\n\n      let lgExpand = new Expand({\n        view: this._view,\n        content: legend,\n        autoCollapse: false,\n      });\n      this._view.ui.add(lgExpand, \"bottom-right\");\n      //Se configura y crea el widget de busqueda\n      this._search = new Search({\n        view: this._view,\n      });\n\n      this._view.ui.add(this._search, {\n        position: \"top-left\",\n        index: 0,\n      });\n\n      this._locator = new Locator({\n        url:\n          \"https://utility.arcgis.com/usrsvcs/appservices/rdJwJijx0YBycNdS/rest/services/World/GeocodeServer/reverseGeocode\",\n      });\n      this._locate = new Locate({\n        view: this._view,\n        useHeadingEnabled: false,\n        goToOverride: function (view, options) {\n          options.target.scale = 1500; // Override the default map scale\n          return view.goTo(options.target);\n        },\n      });\n\n      this._view.ui.add(this._locate, {\n        position: \"top-left\",\n        index: 2,\n      });\n\n      this._pointGC = new Point();\n      this._draw = new Draw({\n        view: this._view,\n      });\n      this._track = new Track({\n        view: this._view,\n        graphic: new Graphic({\n          symbol: {\n            type: \"simple-marker\",\n            size: \"12px\",\n            color: \"green\",\n            outline: {\n              color: \"#efefef\",\n              width: \"1.5px\",\n            },\n          },\n        }),\n        useHeadingEnabled: true, // Don't change orientation of the map\n        goToOverride: function (view, options) {\n          options.target.scale = 1500; // Override the default map scale\n          return view.goTo(options.target);\n        },\n      });\n\n      // this._view.ui.add(this._track, \"top-left\");\n\n      this._distance = new DistanceMeasurement2DViewModel({\n        view: this._view,\n        unit: \"kilometers\",\n      });\n\n      let routeTask = new RouteTask({\n        // url: \"https://utility.arcgis.com/usrsvcs/appservices/6MyWChEzkSbXMie3/rest/services/World/Route/NAServer/Route_World/solve\"\n        url:\n          \"https://sig.simur.gov.co/arcgis/rest/services/MVI_REDBICI/NARedBici/NAServer/Principiante\",\n      });\n\n      let directions = new Directions({\n        view: this._view,\n        // routeServiceUrl: \"https://utility.arcgis.com/usrsvcs/appservices/6MyWChEzkSbXMie3/rest/services/World/Route/NAServer/Route_World\"\n        routeServiceUrl:\n          \"https://sig.simur.gov.co/arcgis/rest/services/MVI_REDBICI/NARedBici/NAServer/Principiante\",\n      });\n\n      let bgExpand = new Expand({\n        view: this._view,\n        content: directions,\n        autoCollapse: false,\n      });\n      this._view.ui.add(bgExpand, \"top-right\");\n\n      await this._view.when();\n\n      return this._view;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  async ngOnInit() {\n    this.presentLoading();\n    // this.backgroundMode.enable();\n    this.user = await this.storage.get(\"userData\");\n    this.initializedMap().then(async (mapView) => {\n      console.log(\"mapView ready: \", this._view.ready);\n      this._loaded = this._view.ready;\n\n      // let position = await this._locate.locate();\n      // console.log(\"position\", position)\n      // mapView.goTo({\n      //   center: this._locate.locate(),\n      //   zoom: 6,\n      //   tilt: 40\n      // })\n      this.loading.dismiss();\n    });\n  }\n  async startRute() {\n    this.clearWindows();\n    this._track.start();\n    await this._distance.start();\n    console.log(this._distance);\n    const fechaActual = new Date();\n    this.fecha = fechaActual;\n    console.log(this.fecha);\n    //se toma la posicion y se geocodifica\n    let address;\n    let position = await this._locate.locate();\n    this._pointGC.latitude = position.coords.latitude;\n    this._pointGC.longitude = position.coords.longitude;\n    let params = {\n      location: this._pointGC,\n    };\n    this._track.on(\"track\", async (position) => {\n      this.recorrido.push(position);\n      let ult = this.recorrido.length - 1;\n      if (this.recorrido.length > 1) {\n        this.km = this.calculateDistance(\n          this.recorrido[0].position.coords.longitude,\n          this.recorrido[ult].position.coords.longitude,\n          this.recorrido[0].position.coords.latitude,\n          this.recorrido[ult].position.coords.latitude\n        );\n        console.log(this.km);\n        // this.ingresos = this.km * this.user.campana_actual.pago_km;\n      }\n    });\n    let geocoder = this._locator;\n    geocoder\n      .locationToAddress(params)\n      .then((response) => {\n        address = response.address;\n        console.log(address);\n        address = address.split(\",\");\n        this.fstDirection = address[0];\n        // this.currentDirection = address[0];\n        // this.km = position.coords.speed;\n\n        // console.log(this.currentDirection)\n      })\n      .catch((err) => console.log(err));\n    //Se inicializa el contador\n    this.contador = setInterval(() => {\n      this.centesimas += 1;\n      if (this.centesimas < 10) this._centesimas = \"0\" + this.centesimas;\n      else this._centesimas = \"\" + this.centesimas;\n      if (this.centesimas == 10) {\n        this.centesimas = 0;\n        this.segundos += 1;\n        if (this.segundos < 10) this._segundos = \"0\" + this.segundos;\n        else this._segundos = this.segundos + \"\";\n        if (this.segundos == 60) {\n          this.segundos = 0;\n          this.minutos += 1;\n          if (this.minutos < 10) this._minutos = \"0\" + this.minutos;\n          else this._minutos = this.minutos + \"\";\n          this._segundos = \"00\";\n          if (this.minutos == 60) {\n            this.minutos = 0;\n            this.minutos += 1;\n            if (this.horas < 10) this._horas = \"0\" + this.horas;\n            else this._horas = this.horas + \"\";\n            this._minutos = \"00\";\n          }\n        }\n      }\n    }, 100);\n  }\n  async stopRute() {\n    try {\n      // this.presentLoading();\n      if (!this.isRun) {\n        this._track.stop();\n        this.time = `${this._horas}:${this._minutos}:${this._segundos}.${this._centesimas}`;\n        clearInterval(this.contador);\n        // this.minutos = 0;\n        // this.segundos = 0;\n        // this.centesimas = 0;\n        // this.horas = 0;\n\n        // this._centesimas = '00';\n        // this._segundos = '00';\n        // this._minutos = '00';\n        // this._horas = '00';\n        this.isRun = false;\n        // this.contador = null;\n\n        //se toma la posicion y se geocodifica\n        let address;\n        let position = await this._locate.locate();\n        this._pointGC.latitude = position.coords.latitude;\n        this._pointGC.longitude = position.coords.longitude;\n        let params = {\n          location: this._pointGC,\n        };\n        let geocoder = this._locator;\n        geocoder\n          .locationToAddress(params)\n          .then((response) => {\n            address = response.address;\n            console.log(address);\n            address = address.split(\",\");\n            this.fnlDirection = address[0];\n            // this.currentDirection = address[0];\n            // console.log(this.currentDirection)\n            let kms = parseFloat(this.km);\n            let co2 = kms * 0.3;\n            this.co2 = co2.toFixed(3);\n            console.log(\"co2\", typeof kms, this.co2);\n            this.ruteData = {\n              fecha: this.fecha,\n              inicio: this.fstDirection,\n              final: this.fnlDirection,\n              tiempo: this.time,\n              kms: this.km,\n              cal: this.cal,\n              co2: this.co2,\n              ingresos: this.ingresos,\n            };\n            console.log(this.ruteData);\n            this.apiService.sendRute(this.ruteData);\n            // .then(()=>{this.loading.dismiss()});\n          })\n          .catch((err) => console.log(err));\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  calculateDistance(lon1, lon2, lat1, lat2) {\n    let p = 0.017453292519943295;\n    let c = Math.cos;\n    let a =\n      0.5 -\n      c((lat1 - lat2) * p) / 2 +\n      (c(lat2 * p) * c(lat1 * p) * (1 - c((lon1 - lon2) * p))) / 2;\n    let dis = 12742 * Math.asin(Math.sqrt(a));\n    return dis.toFixed(2);\n  }\n  clearWindows() {\n    this.minutos = 0;\n    this.segundos = 0;\n    this.centesimas = 0;\n    this.horas = 0;\n\n    this._centesimas = \"00\";\n    this._segundos = \"00\";\n    this._minutos = \"00\";\n    this._horas = \"00\";\n    this.km = 0;\n  }\n  async presentLoading() {\n    this.loading = await this.loadingCtrl.create({\n      cssClass: \"my-custom-class\",\n      message: \"Cargando...\",\n    });\n    await this.loading.present();\n  }\n  getIconByStatus(status) {\n    let icon = \"\";\n    switch (status) {\n      case \"true\":\n        icon = \"button-stop-29.png\";\n        break;\n      case \"false\":\n        icon = \"button-start-29.png\";\n        break;\n    }\n    return icon;\n  }\n}\n","export default \"<ion-content>\\n  <div class=\\\"logo-ekobike-in\\\">    \\n      <img src=\\\"assets/img/logo-ekobike.png\\\">\\n  </div>\\n    <!-- <div id=\\\"viewDiv\\\" #map></div> -->\\n  <div class=\\\"content-map\\\">\\n    <div class=\\\"ui grid content-play\\\">\\n      <div class=\\\"column distance\\\">\\n        <!-- <h5>Explora</h5>\\n        <h3 id=\\\"km\\\">0</h3> -->\\n        <h4>Explora</h4>\\n      </div>\\n    </div>\\n    <div id=\\\"viewDiv\\\" #map></div>\\n    <!-- <div class=\\\"chrono\\\">\\n      <div class=\\\"time-elapsed\\\">\\n        <h4>\\n          Tiempo Recorrido\\n        </h4>\\n        <h2 id=time>{{_horas}}:{{_minutos}}:{{_segundos}}.{{_centesimas}}</h2>\\n      </div>\\n      <div class=\\\"calories-co2\\\">\\n        <div class=\\\"calories\\\">\\n          <h4>\\n            Consumo de Calorías\\n          </h4>\\n          <h2>\\n            0\\n          </h2>\\n          <h5>\\n            Kcal\\n          </h5>\\n        </div>\\n        <div class=\\\"co2\\\">\\n          <h4>\\n            CO2 Reducido\\n          </h4>\\n          <h2>\\n            0\\n          </h2>\\n          <h5>\\n            Kgr\\n          </h5>\\n        </div>\\n      </div>\\n      <div class=\\\"max-speed\\\">\\n        <h4>\\n          Velocidad Máxima\\n        </h4>\\n        <h2>\\n          0\\n        </h2>\\n        <h5>\\n          Km/h\\n        </h5>\\n      </div>\\n    </div> -->\\n  </div>\\n</ion-content>\";"]}
>>>>>>> eee3e90cb9d663b17dfe63088ee22256bfa28c60
