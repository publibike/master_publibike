{"version":3,"sources":["webpack:///src/app/rute/rute.module.ts","webpack:///src/app/rute/rute-routing.module.ts","webpack:///src/app/rute/rute.page.scss","webpack:///src/app/rute/rute.page.ts","webpack:///src/app/rute/rute.page.html"],"names":["RutePageModule","imports","declarations","routes","path","component","RutePageRoutingModule","forChild","exports","RutePage","apiService","storage","loadingCtrl","_zoom","_center","_basemap","_loaded","_view","_locator","_locate","_search","_track","_pointGC","_draw","_distance","horas","centesimas","minutos","segundos","_centesimas","_minutos","_segundos","_horas","isRun","recorrido","user","nombre","apellido","ganancia_total","km_total","cal_total","co2_total","ruteData","km","ingresos","cal","co2","Map","MapView","Graphic","RouteTask","RouteParameters","FeatureSet","Directions","Locate","Track","Locator","Search","Expand","Legend","Point","Draw","geometryEngine","FeatureLayer","DistanceMeasurement2DViewModel","map","basemap","container","mapEl","nativeElement","center","zoom","template","title","content","console","log","parkingLayer","url","outFields","PopupTemplate","add","legend","view","layerInfos","layer","lgExpand","autoCollapse","ui","position","index","useHeadingEnabled","goToOverride","options","target","scale","goTo","graphic","symbol","type","size","color","outline","width","unit","routeTask","directions","routeServiceUrl","bgExpand","when","presentLoading","get","initializedMap","then","mapView","ready","loading","dismiss","clearWindows","start","fechaActual","Date","fecha","locate","latitude","coords","longitude","params","location","on","push","ult","length","calculateDistance","geocoder","locationToAddress","response","address","split","fstDirection","err","contador","setInterval","stop","time","clearInterval","fnlDirection","kms","parseFloat","toFixed","inicio","tiempo","sendRute","lon1","lon2","lat1","lat2","p","c","Math","cos","a","dis","asin","sqrt","create","cssClass","message","present","status","icon","selector"],"mappings":"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","file":"rute-rute-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RutePageRoutingModule } from './rute-routing.module';\n\nimport { RutePage } from './rute.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RutePageRoutingModule\n  ],\n  declarations: [RutePage]\n})\nexport class RutePageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RutePage } from './rute.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RutePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RutePageRoutingModule {}\n","export default \".logo-ekobike-in {\\n  position: unset;\\n  margin-bottom: 30px;\\n  margin-top: 20px;\\n}\\n\\n.content-map {\\n  height: 100%;\\n}\\n\\n#viewDiv {\\n  padding: 0;\\n  margin: 0;\\n  height: 400px;\\n  width: 100%;\\n}\\n\\n.esri-view-width-xsmall .esri-expand--auto .esri-expand__container--expanded {\\n  height: 34%;\\n  background: #001434;\\n}\\n\\n.esri-widget--button {\\n  background-color: #f9b410 !important;\\n  color: #001434 !important;\\n}\\n\\n.esri-view .esri-directions {\\n  position: fixed;\\n  right: 15px;\\n}\\n\\n.esri-view .esri-component.esri-attribution {\\n  position: fixed;\\n}\\n\\n.esri-search__suggestions-list > li {\\n  padding: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcnV0ZS9ydXRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxZQUFBO0FBRUo7O0FBQUE7RUFDSSxVQUFBO0VBQ0EsU0FBQTtFQUNBLGFBQUE7RUFDQSxXQUFBO0FBR0o7O0FBREE7RUFDSSxXQUFBO0VBQ0EsbUJBQUE7QUFJSjs7QUFGQTtFQUNJLG9DQUFBO0VBQ0EseUJBQUE7QUFLSjs7QUFIQTtFQUNJLGVBQUE7RUFDQSxXQUFBO0FBTUo7O0FBSEE7RUFDSSxlQUFBO0FBTUo7O0FBSkE7RUFDSSxZQUFBO0FBT0oiLCJmaWxlIjoic3JjL2FwcC9ydXRlL3J1dGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvZ28tZWtvYmlrZS1pbiB7XHJcbiAgICBwb3NpdGlvbjogdW5zZXQ7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxufVxyXG4uY29udGVudC1tYXB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuI3ZpZXdEaXYge1xyXG4gICAgcGFkZGluZzogMDtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIGhlaWdodDogNDAwcHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG4uZXNyaS12aWV3LXdpZHRoLXhzbWFsbCAuZXNyaS1leHBhbmQtLWF1dG8gLmVzcmktZXhwYW5kX19jb250YWluZXItLWV4cGFuZGVkIHtcclxuICAgIGhlaWdodDogMzQlO1xyXG4gICAgYmFja2dyb3VuZDogIzAwMTQzNDtcclxufVxyXG4uZXNyaS13aWRnZXQtLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjliNDEwICFpbXBvcnRhbnQ7XHJcbiAgICBjb2xvcjogIzAwMTQzNCAhaW1wb3J0YW50O1xyXG59XHJcbi5lc3JpLXZpZXcgLmVzcmktZGlyZWN0aW9ucyB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICByaWdodDogMTVweDtcclxufVxyXG5cclxuLmVzcmktdmlldyAuZXNyaS1jb21wb25lbnQuZXNyaS1hdHRyaWJ1dGlvbiB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbn1cclxuLmVzcmktc2VhcmNoX19zdWdnZXN0aW9ucy1saXN0ID4gbGkge1xyXG4gICAgcGFkZGluZzogMWVtO1xyXG59XHJcbiJdfQ== */\";","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { LoadingController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport { loadModules } from 'esri-loader';\nimport { ApiPublibikeBienestarService } from '../services/api-publibike-bienestar.service';\nimport esri = __esri;\n\n@Component({\n  selector: 'app-rute',\n  templateUrl: './rute.page.html',\n  styleUrls: ['./rute.page.scss'],\n})\nexport class RutePage implements OnInit {\n\n  @ViewChild('map') mapEl: ElementRef;\n  loading: any;\n  //Variables ArcGIS\n  private _zoom = 10;\n  private _center: Array<number> = [-74.090923, 4.694939];\n  private _basemap = \"streets-vector\";\n  private _loaded = false;\n  private _view: esri.MapView = null;\n  private _locator: esri.Locator = null;\n  private _locate: esri.Locate = null;\n  private _search: esri.widgetsSearch = null;\n  private _track: esri.Track = null;\n  private _pointGC: esri.Point = null;\n  private _draw: esri.Draw = null;\n  private _distance: esri.DistanceMeasurement2DViewModel = null;\n\n\n  //Variables del cronometro\n  public horas: number = 0;\n  public centesimas: number = 0;\n  public minutos: number = 59;\n  public segundos: number = 0;\n  public contador: any;\n\n  public _centesimas: string = '00';\n  public _minutos: string = '00';\n  public _segundos: string = '00';\n  public _horas: string = '00';\n\n  isRun = false;\n\n  //Array recorrido con las coordenadas\n  recorrido: any[] = [];\n\n  user: {\n    nombre: String,\n    apellido: String,\n    ganancia_total: number,\n    km_total: number,\n    cal_total: number,\n    co2_total: number\n  } = {\n      nombre: \"\",\n      apellido: \"\",\n      ganancia_total: 0,\n      km_total: 0,\n      cal_total: 0,\n      co2_total: 0\n    };\n  ruteData: object = {};\n  fecha: any;\n  fstDirection: any;\n  fnlDirection: any;\n  time: any;\n  km: any = 0.0;\n  ingresos: any = 0;\n  cal: any = 0;\n  co2: any = 0;\n\n  constructor(\n    private apiService: ApiPublibikeBienestarService,\n    private storage: Storage,\n    private loadingCtrl: LoadingController\n  ) { }\n\n  async initializedMap() {\n    try {\n      const [\n        Map, MapView, Graphic, RouteTask, RouteParameters, FeatureSet, Directions, Locate, Track, Locator, Search, Expand, Legend, Point, Draw, geometryEngine, FeatureLayer, DistanceMeasurement2DViewModel\n      ]: any\n        = await loadModules([\n          'esri/Map',\n          'esri/views/MapView',\n          \"esri/Graphic\",\n          \"esri/tasks/RouteTask\",\n          \"esri/tasks/support/RouteParameters\",\n          \"esri/tasks/support/FeatureSet\",\n          \"esri/widgets/Directions\",\n          \"esri/widgets/Locate\",\n          \"esri/widgets/Track\",\n          \"esri/tasks/Locator\",\n          \"esri/widgets/Search\",\n          \"esri/widgets/Expand\",\n          \"esri/widgets/Legend\",\n          \"esri/geometry/Point\",\n          \"esri/views/draw/Draw\",\n          \"esri/geometry/geometryEngine\",\n          \"esri/layers/FeatureLayer\",\n          \"esri/widgets/DistanceMeasurement2D/DistanceMeasurement2DViewModel\"\n        ]);\n      // await this._platform.ready();\n\n      let map = new Map({\n        basemap: this._basemap\n      });\n      // Inflate and display the map\n      this._view = new MapView({\n        // create the map view at the DOM element in this component\n        container: this.mapEl.nativeElement,\n        center: this._center,\n        zoom: this._zoom,\n        map: map\n      });\n\n      const template = {\n        title: \"Cicloparqueadero\",\n        content: function () {\n          console.log(\"Click\")\n          return \"<b>Nombre:</b> {NOMBRE_CICP}<br><b>Horario:</b> {HORARIO_CICP}<br><b>Dirección:</b> {DIRECCION}<br><b>Cupos:</b> {CUPOS} <br><b>Servicio:</b> {TIPOLOGIA_CICP}\"\n        }\n      };\n      const parkingLayer = new FeatureLayer({\n        url: \"https://services2.arcgis.com/NEwhEo9GGSHXcRXV/arcgis/rest/services/Cicloparqueaderos_Certificados_Bogota_D_C/FeatureServer/0\",\n        outFields: [\"NOMBRE_CICP\", \"HORARIO_CICP\", \"DIRECCION\", \"CUPOS\", \"TIPOLOGIA_CICP\"],\n        PopupTemplate: template\n      })\n      map.add(parkingLayer);\n\n      var legend = new Legend({\n        view: this._view,\n        layerInfos: [{\n          layer: parkingLayer,\n          title: \"Categoria Cicloparqueaderos\"\n        }]\n      });\n      // this._view.ui.add(legend, \"bottom-right\");\n\n      let lgExpand = new Expand({\n        view: this._view,\n        content: legend,\n        autoCollapse: false\n      });\n      this._view.ui.add(lgExpand, \"bottom-right\");\n      //Se configura y crea el widget de busqueda\n      this._search = new Search({\n        view: this._view,\n      });\n\n      this._view.ui.add(this._search, {\n        position: \"top-left\",\n        index: 0\n      });\n\n      this._locator = new Locator({\n        url: \"https://utility.arcgis.com/usrsvcs/appservices/rdJwJijx0YBycNdS/rest/services/World/GeocodeServer/reverseGeocode\"\n      })\n      this._locate = new Locate({\n        view: this._view,\n        useHeadingEnabled: false,\n        goToOverride: function (view, options) {\n          options.target.scale = 1500;  // Override the default map scale\n          return view.goTo(options.target);\n        }\n      });\n\n      this._view.ui.add(this._locate, {\n        position: \"top-left\",\n        index: 2\n      });\n\n      this._pointGC = new Point();\n      this._draw = new Draw({\n        view: this._view\n      });\n      this._track = new Track({\n        view: this._view,\n        graphic: new Graphic({\n          symbol: {\n            type: \"simple-marker\",\n            size: \"12px\",\n            color: \"green\",\n            outline: {\n              color: \"#efefef\",\n              width: \"1.5px\"\n            }\n          }\n        }),\n        useHeadingEnabled: true,  // Don't change orientation of the map\n        goToOverride: function (view, options) {\n          options.target.scale = 1500;  // Override the default map scale\n          return view.goTo(options.target);\n        }\n      });\n\n      // this._view.ui.add(this._track, \"top-left\");\n\n      this._distance = new DistanceMeasurement2DViewModel({\n        view: this._view,\n        unit: \"kilometers\"\n      });\n\n\n      let routeTask = new RouteTask({\n        // url: \"https://utility.arcgis.com/usrsvcs/appservices/6MyWChEzkSbXMie3/rest/services/World/Route/NAServer/Route_World/solve\"\n        url: \"https://sig.simur.gov.co/arcgis/rest/services/MVI_REDBICI/NARedBici/NAServer/Principiante\",\n\n      });\n\n      let directions = new Directions({\n        view: this._view,\n        // routeServiceUrl: \"https://utility.arcgis.com/usrsvcs/appservices/6MyWChEzkSbXMie3/rest/services/World/Route/NAServer/Route_World\"\n        routeServiceUrl: \"https://sig.simur.gov.co/arcgis/rest/services/MVI_REDBICI/NARedBici/NAServer/Principiante\",\n      });\n\n      let bgExpand = new Expand({\n        view: this._view,\n        content: directions,\n        autoCollapse: false\n      });\n      this._view.ui.add(bgExpand, \"top-right\");\n\n      await this._view.when();\n\n      return this._view;\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  async ngOnInit() {\n    this.presentLoading();\n    // this.backgroundMode.enable();\n    this.user = await this.storage.get(\"userData\");\n    this.initializedMap()\n      .then(async mapView => {\n        console.log(\"mapView ready: \", this._view.ready);\n        this._loaded = this._view.ready;\n\n        // let position = await this._locate.locate();\n        // console.log(\"position\", position)\n        // mapView.goTo({\n        //   center: this._locate.locate(),\n        //   zoom: 6,\n        //   tilt: 40\n        // })\n        this.loading.dismiss();\n      });\n  }\n  async startRute() {\n    this.clearWindows();\n    this._track.start();\n    await this._distance.start();\n    console.log(this._distance)\n    const fechaActual = new Date;\n    this.fecha = fechaActual;\n    console.log(this.fecha);\n    //se toma la posicion y se geocodifica\n    let address;\n    let position = await this._locate.locate();\n    this._pointGC.latitude = position.coords.latitude;\n    this._pointGC.longitude = position.coords.longitude;\n    let params = {\n      location: this._pointGC\n    }\n    this._track.on(\"track\", async (position) => {\n      this.recorrido.push(position);\n      let ult = this.recorrido.length - 1;\n      if (this.recorrido.length > 1) {\n        this.km = this.calculateDistance(this.recorrido[0].position.coords.longitude, this.recorrido[ult].position.coords.longitude, this.recorrido[0].position.coords.latitude, this.recorrido[ult].position.coords.latitude)\n        console.log(this.km)\n        // this.ingresos = this.km * this.user.campana_actual.pago_km;\n      }\n    })\n    let geocoder = this._locator;\n    geocoder.locationToAddress(params)\n      .then((response) => {\n        address = response.address;\n        console.log(address)\n        address = address.split(\",\");\n        this.fstDirection = address[0];\n        // this.currentDirection = address[0];\n        // this.km = position.coords.speed;\n\n        // console.log(this.currentDirection)\n\n      }).catch(err => console.log(err))\n    //Se inicializa el contador  \n    this.contador = setInterval(() => {\n      this.centesimas += 1;\n      if (this.centesimas < 10) this._centesimas = '0' + this.centesimas;\n      else this._centesimas = '' + this.centesimas;\n      if (this.centesimas == 10) {\n        this.centesimas = 0;\n        this.segundos += 1;\n        if (this.segundos < 10) this._segundos = '0' + this.segundos;\n        else this._segundos = this.segundos + '';\n        if (this.segundos == 60) {\n          this.segundos = 0;\n          this.minutos += 1;\n          if (this.minutos < 10) this._minutos = '0' + this.minutos;\n          else this._minutos = this.minutos + '';\n          this._segundos = '00';\n          if (this.minutos == 60) {\n            this.minutos = 0;\n            this.minutos += 1;\n            if (this.horas < 10) this._horas = '0' + this.horas;\n            else this._horas = this.horas + '';\n            this._minutos = '00';\n          }\n        }\n      }\n    }, 100)\n  }\n  async stopRute() {\n    try {\n      // this.presentLoading();\n      if (!this.isRun) {\n        this._track.stop();\n        this.time = `${this._horas}:${this._minutos}:${this._segundos}.${this._centesimas}`;\n        clearInterval(this.contador);\n        // this.minutos = 0;\n        // this.segundos = 0;\n        // this.centesimas = 0;\n        // this.horas = 0;\n\n        // this._centesimas = '00';\n        // this._segundos = '00';\n        // this._minutos = '00';\n        // this._horas = '00';\n        this.isRun = false;\n        // this.contador = null;\n\n        //se toma la posicion y se geocodifica\n        let address;\n        let position = await this._locate.locate();\n        this._pointGC.latitude = position.coords.latitude;\n        this._pointGC.longitude = position.coords.longitude;\n        let params = {\n          location: this._pointGC\n        }\n        let geocoder = this._locator;\n        geocoder.locationToAddress(params)\n          .then((response) => {\n            address = response.address;\n            console.log(address);\n            address = address.split(\",\")\n            this.fnlDirection = address[0];\n            // this.currentDirection = address[0];\n            // console.log(this.currentDirection)\n            let kms = parseFloat(this.km);\n            let co2 = kms * 0.3;\n            this.co2 = co2.toFixed(3);\n            console.log(\"co2\", typeof (kms), this.co2);\n            this.ruteData = {\n              fecha: this.fecha,\n              inicio: this.fstDirection,\n              final: this.fnlDirection,\n              tiempo: this.time,\n              kms: this.km,\n              cal: this.cal,\n              co2: this.co2,\n              ingresos: this.ingresos\n            }\n            console.log(this.ruteData)\n            this.apiService.sendRute(this.ruteData)\n            // .then(()=>{this.loading.dismiss()});\n\n          }).catch(err => console.log(err))\n      }\n    } catch (error) {\n      console.log(error)\n    }\n\n  }\n  calculateDistance(lon1, lon2, lat1, lat2) {\n    let p = 0.017453292519943295;\n    let c = Math.cos;\n    let a = 0.5 - c((lat1 - lat2) * p) / 2 + c(lat2 * p) * c((lat1) * p) * (1 - c(((lon1 - lon2) * p))) / 2;\n    let dis = (12742 * Math.asin(Math.sqrt(a)));\n    return dis.toFixed(2);\n  }\n  clearWindows() {\n    this.minutos = 0;\n    this.segundos = 0;\n    this.centesimas = 0;\n    this.horas = 0;\n\n    this._centesimas = '00';\n    this._segundos = '00';\n    this._minutos = '00';\n    this._horas = '00';\n    this.km = 0;\n  }\n  async presentLoading() {\n    this.loading = await this.loadingCtrl.create({\n      cssClass: 'my-custom-class',\n      message: 'Cargando...'\n    });\n    await this.loading.present();\n  }\n  getIconByStatus(status) {\n    let icon = '';\n    switch (status) {\n      case 'true':\n        icon = 'button-stop-29.png';\n        break;\n      case 'false':\n        icon = 'button-start-29.png';\n        break;\n    }\n    return icon;\n  }\n}\n","export default \"<ion-content>\\n  <div class=\\\"logo-ekobike-in\\\">    \\n      <img src=\\\"assets/img/logo-ekobike.png\\\">\\n  </div>\\n    <!-- <div id=\\\"viewDiv\\\" #map></div> -->\\n  <div class=\\\"content-map\\\">\\n    <div class=\\\"ui grid content-play\\\">\\n      <div class=\\\"column distance\\\">\\n        <!-- <h5>Explora</h5>\\n        <h3 id=\\\"km\\\">0</h3> -->\\n        <h4>Explora</h4>\\n      </div>\\n    </div>\\n    <div id=\\\"viewDiv\\\" #map></div>\\n    <!-- <div class=\\\"chrono\\\">\\n      <div class=\\\"time-elapsed\\\">\\n        <h4>\\n          Tiempo Recorrido\\n        </h4>\\n        <h2 id=time>{{_horas}}:{{_minutos}}:{{_segundos}}.{{_centesimas}}</h2>\\n      </div>\\n      <div class=\\\"calories-co2\\\">\\n        <div class=\\\"calories\\\">\\n          <h4>\\n            Consumo de Calorías\\n          </h4>\\n          <h2>\\n            0\\n          </h2>\\n          <h5>\\n            Kcal\\n          </h5>\\n        </div>\\n        <div class=\\\"co2\\\">\\n          <h4>\\n            CO2 Reducido\\n          </h4>\\n          <h2>\\n            0\\n          </h2>\\n          <h5>\\n            Kgr\\n          </h5>\\n        </div>\\n      </div>\\n      <div class=\\\"max-speed\\\">\\n        <h4>\\n          Velocidad Máxima\\n        </h4>\\n        <h2>\\n          0\\n        </h2>\\n        <h5>\\n          Km/h\\n        </h5>\\n      </div>\\n    </div> -->\\n  </div>\\n</ion-content>\";"]}