(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"f+ep":function(l,n,u){"use strict";u.r(n),u.d(n,"LoginPageModuleNgFactory",(function(){return G}));var e=u("8Y7J");class t{}var i=u("pMnS"),o=u("SVse"),r=u("MKJQ"),s=u("sZkV"),a=u("s7LF"),b=u("mrSG");class g{constructor(l,n,u,e,t){this.formBuilder=l,this.authServices=n,this.navCtrl=u,this.loadingCtrl=e,this.storage=t,this.validation_messages={user:[{type:"required",message:"El usuario es requerido"},{type:"minlength",message:"Minimo 6 n\xf9meros para el usuario"}]},this.errorMessage="",this.loginForm=this.formBuilder.group({user:new a.c("",a.l.compose([a.l.required,a.l.minLength(6)]))})}loginUser(l){this.presentLoading(),console.log(l),this.authServices.loginUser(l).then(l=>{console.log(l),this.errorMessage="",this.storage.set("isUserLoggedIn",!0),this.storage.set("userId",l),this.loading.dismiss(),this.navCtrl.navigateForward("/tabs/profile")}).catch(l=>{console.log(l),this.loading.dismiss(),console.error("ERROR",l.name),"SyntaxError"==l.name?(console.log(l),this.errorMessage="Usuario Incorrecto"):"TypeError"==l.name&&console.log(l)})}presentLoading(){return Object(b.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Cargando..."}),yield this.loading.present()}))}}var d=u("AytR"),c=u("xgBC");let p=(()=>{class l{constructor(l){this.storage=l}loginUser(l){return Object(b.a)(this,void 0,void 0,(function*(){yield this.storage.get("user");const n={method:"POST",body:JSON.stringify(l),headers:new Headers({"Content-Type":"application/json"})};return fetch(d.a.publibikeApi+"/api/movil/login",n).then(l=>l.json())}))}}return l.\u0275prov=e.Vb({factory:function(){return new l(e.Wb(c.b))},token:l,providedIn:"root"}),l})();var m=e.sb({encapsulation:0,styles:[[".form-login[_ngcontent-%COMP%]   .ui.button[_ngcontent-%COMP%]{padding:0;border-radius:20px!important}ion-content[_ngcontent-%COMP%]{--background:url(dark-background-uflou-07.441012e0aa4aff61db34.jpg) no-repeat fixed center!important;--background-position:top right}ion-button[_ngcontent-%COMP%]{--border-radius:30px}"]],data:{}});function h(l){return e.Ub(0,[(l()(),e.ub(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.ub(1,0,null,null,1,"p",[["id","alertUser"]],null,null,null,null,null)),(l()(),e.Rb(2,null,["",""]))],null,(function(l,n){l(n,2,0,n.parent.context.$implicit.message)}))}function v(l){return e.Ub(0,[(l()(),e.ub(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.db(16777216,null,null,1,null,h)),e.tb(2,16384,null,0,o.j,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.db(0,null,null,0))],(function(l,n){var u=n.component;l(n,2,0,u.loginForm.get("user").hasError(n.context.$implicit.type)&&(u.loginForm.get("user").dirty||u.loginForm.get("user").touched))}),null)}function f(l){return e.Ub(0,[(l()(),e.ub(0,0,null,null,33,"ion-content",[],null,null,null,r.x,r.e)),e.tb(1,49152,null,0,s.s,[e.h,e.l,e.z],null,null),(l()(),e.ub(2,0,null,0,31,"div",[["class","main-wrapper"]],null,null,null,null,null)),(l()(),e.ub(3,0,null,null,2,"div",[["class","logo-ekobike"]],null,null,null,null,null)),(l()(),e.ub(4,0,null,null,1,"a",[["href","assets/index.html"]],null,null,null,null,null)),(l()(),e.ub(5,0,null,null,0,"img",[["src","assets/img/logo-publibike.png"]],null,null,null,null,null)),(l()(),e.ub(6,0,null,null,22,"div",[["class","form-login"]],null,null,null,null,null)),(l()(),e.ub(7,0,null,null,21,"form",[["class","ui form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0,i=l.component;return"submit"===n&&(t=!1!==e.Ib(l,9).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Ib(l,9).onReset()&&t),"ngSubmit"===n&&(t=!1!==i.loginUser(i.loginForm.value)&&t),t}),null,null)),e.tb(8,16384,null,0,a.p,[],null,null),e.tb(9,540672,null,0,a.e,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),e.Mb(2048,null,a.a,null,[a.e]),e.tb(11,16384,null,0,a.j,[[4,a.a]],null,null),(l()(),e.ub(12,0,null,null,7,"div",[["class","field"]],null,null,null,null,null)),(l()(),e.ub(13,0,null,null,6,"ion-input",[["formControlName","user"],["id","user"],["placeholder","Ingresa tu usuario"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var t=!0;return"ionBlur"===n&&(t=!1!==e.Ib(l,14)._handleBlurEvent(u.target)&&t),"ionChange"===n&&(t=!1!==e.Ib(l,14)._handleInputEvent(u.target)&&t),t}),r.B,r.i)),e.tb(14,4341760,null,0,s.Hb,[e.r,e.l],null,null),e.Mb(1024,null,a.g,(function(l){return[l]}),[s.Hb]),e.tb(16,671744,null,0,a.d,[[3,a.a],[8,null],[8,null],[6,a.g],[2,a.o]],{name:[0,"name"]},null),e.Mb(2048,null,a.h,null,[a.d]),e.tb(18,16384,null,0,a.i,[[4,a.h]],null,null),e.tb(19,49152,null,0,s.E,[e.h,e.l,e.z],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(l()(),e.ub(20,0,null,null,2,"div",[["class","validation-error"]],null,null,null,null,null)),(l()(),e.db(16777216,null,null,1,null,v)),e.tb(22,278528,null,0,o.i,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.ub(23,0,null,null,1,"p",[["id","alertUser"]],null,null,null,null,null)),(l()(),e.Rb(24,null,[" ",""])),(l()(),e.ub(25,0,null,null,2,"ion-button",[["class","ui button"],["color","secondary"],["text-center",""],["type","Submit"]],null,null,null,r.v,r.c)),e.tb(26,49152,null,0,s.i,[e.h,e.l,e.z],{color:[0,"color"],disabled:[1,"disabled"],type:[2,"type"]},null),(l()(),e.Rb(-1,0,["Ingresar "])),(l()(),e.ub(28,0,null,null,0,"p",[["id","alertUser"]],null,null,null,null,null)),(l()(),e.ub(29,0,null,null,4,"div",[["class","footer-main"]],null,null,null,null,null)),(l()(),e.ub(30,0,null,null,2,"div",[["class","animation-bike"]],null,null,null,null,null)),(l()(),e.ub(31,0,null,null,1,"div",[["class","biker"]],null,null,null,null,null)),(l()(),e.ub(32,0,null,null,0,"img",[["src","assets/img/biker-ekobike.png"]],null,null,null,null,null)),(l()(),e.ub(33,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,9,0,u.loginForm),l(n,16,0,"user"),l(n,19,0,"Ingresa tu usuario","text"),l(n,22,0,u.validation_messages.user),l(n,26,0,"secondary",!u.loginForm.valid,"Submit")}),(function(l,n){var u=n.component;l(n,7,0,e.Ib(n,11).ngClassUntouched,e.Ib(n,11).ngClassTouched,e.Ib(n,11).ngClassPristine,e.Ib(n,11).ngClassDirty,e.Ib(n,11).ngClassValid,e.Ib(n,11).ngClassInvalid,e.Ib(n,11).ngClassPending),l(n,13,0,e.Ib(n,18).ngClassUntouched,e.Ib(n,18).ngClassTouched,e.Ib(n,18).ngClassPristine,e.Ib(n,18).ngClassDirty,e.Ib(n,18).ngClassValid,e.Ib(n,18).ngClassInvalid,e.Ib(n,18).ngClassPending),l(n,24,0,u.errorMessage)}))}function C(l){return e.Ub(0,[(l()(),e.ub(0,0,null,null,1,"app-login",[],null,null,null,f,m)),e.tb(1,49152,null,0,g,[a.b,p,s.Db,s.Bb,c.b],null,null)],null,null)}var I=e.qb("app-login",g,C,{},{},[]),y=u("iInd");class k{}var G=e.rb(t,[],(function(l){return e.Fb([e.Gb(512,e.j,e.W,[[8,[i.a,I]],[3,e.j],e.x]),e.Gb(4608,o.l,o.k,[e.u]),e.Gb(4608,a.n,a.n,[]),e.Gb(4608,s.b,s.b,[e.z,e.g]),e.Gb(4608,s.Cb,s.Cb,[s.b,e.j,e.r]),e.Gb(4608,s.Gb,s.Gb,[s.b,e.j,e.r]),e.Gb(4608,a.b,a.b,[]),e.Gb(1073742336,o.b,o.b,[]),e.Gb(1073742336,a.m,a.m,[]),e.Gb(1073742336,a.f,a.f,[]),e.Gb(1073742336,s.zb,s.zb,[]),e.Gb(1073742336,y.n,y.n,[[2,y.s],[2,y.m]]),e.Gb(1073742336,k,k,[]),e.Gb(1073742336,a.k,a.k,[]),e.Gb(1073742336,t,t,[]),e.Gb(1024,y.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);